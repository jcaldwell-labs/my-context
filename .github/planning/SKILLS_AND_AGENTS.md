# Skills & Agents Recommendations
**For:** My-Context Copilot Development
**Date:** 2025-11-16
**Purpose:** Optimize development workflow with AI-assisted automation

---

## Overview

This document outlines recommended skills and agents to enhance the My-Context development workflow. These tools automate repetitive tasks, enforce quality standards, and accelerate development velocity.

---

## 1. Claude Code Skills

### 1.1 Session Start Hook (Available Now)

**Purpose:** Auto-run checks when opening the project in Claude Code

**Setup:**
```bash
# Enable the session-start-hook skill
# In Claude Code: /skill session-start-hook
```

**Recommended Configuration:**
Create `.claude/hooks/session-start.sh`:
```bash
#!/bin/bash
echo "ðŸš€ My-Context Development Environment"
echo ""

# Show current branch
echo "ðŸ“ Branch: $(git branch --show-current)"
echo "ðŸ“ Last commit: $(git log -1 --oneline)"
echo ""

# Run quick checks
echo "ðŸ” Running quick checks..."
make fmt
make test-short

echo ""
echo "âœ… Environment ready!"
```

**Benefits:**
- Ensures code is formatted on session start
- Catches test failures early
- Provides context about current branch/commit

---

## 2. Custom Development Agents

### 2.1 Quality Guardian Agent

**Purpose:** Enforce quality standards before commits

**Configuration:**
```yaml
# .claude/agents/quality-guardian.yml
name: Quality Guardian
trigger: before_commit
enabled: true

checks:
  - name: Format Check
    command: make fmt
    blocking: true

  - name: Lint
    command: make lint
    blocking: true
    error_patterns:
      - "Error:"
      - "Fatal:"

  - name: Tests
    command: make test-short
    blocking: true
    timeout: 120s

  - name: Build
    command: make build
    blocking: true

notifications:
  on_success: "âœ… All quality checks passed"
  on_failure: "âŒ Quality checks failed - review output above"
```

**Implementation:**
```bash
# .git/hooks/pre-commit
#!/bin/bash
# Auto-generated by Quality Guardian Agent

echo "ðŸ›¡ï¸  Quality Guardian: Running pre-commit checks..."
echo ""

# Run make check (includes fmt, lint, test)
if ! make check; then
    echo ""
    echo "âŒ Quality checks failed!"
    echo "Fix issues above or use 'git commit --no-verify' to bypass (not recommended)"
    exit 1
fi

echo ""
echo "âœ… All quality checks passed!"
exit 0
```

**Setup:**
```bash
chmod +x .git/hooks/pre-commit
```

---

### 2.2 Documentation Sync Agent

**Purpose:** Keep documentation in sync with code changes

**Triggers:**
- New command added to `internal/commands/`
- Flag added to existing command
- Constitution principle changed

**Actions:**
1. Update command list in `README.md`
2. Update command list in `CLAUDE.md`
3. Update command table in `SKUNKWORKS_REVIEW.md`
4. Check cross-references

**Configuration:**
```yaml
# .claude/agents/docs-sync.yml
name: Documentation Sync
trigger: on_file_change
patterns:
  - "internal/commands/*.go"
  - ".specify/memory/constitution.md"

actions:
  - name: Extract Commands
    script: |
      # Extract all command names from internal/commands/
      find internal/commands -name "*.go" -exec grep -h "Use:.*\"" {} \; |
        sed 's/.*Use:\s*"\([^"]*\)".*/\1/' |
        sort > .docs-cache/commands.txt

  - name: Update README
    script: |
      # Update command list in README.md
      # (Template-based replacement)

  - name: Update CLAUDE.md
    script: |
      # Update command list in CLAUDE.md

  - name: Verify Consistency
    command: diff .docs-cache/commands-readme.txt .docs-cache/commands-claude.txt
    on_diff: notify

notifications:
  on_sync: "ðŸ“ Documentation updated"
  on_drift: "âš ï¸  Documentation out of sync - review needed"
```

---

### 2.3 Cross-Platform Test Agent

**Purpose:** Validate cross-platform compatibility before releases

**Configuration:**
```yaml
# .claude/agents/cross-platform-validator.yml
name: Cross-Platform Validator
trigger: before_release
enabled: true

platforms:
  - name: Linux (Ubuntu)
    os: ubuntu-latest
    tests:
      - make build
      - make test
      - ./bin/my-context --version

  - name: Windows (Git Bash)
    os: windows-latest
    shell: bash
    tests:
      - make build
      - make test
      - ./bin/my-context.exe --version

  - name: macOS (Intel)
    os: macos-13
    tests:
      - make build
      - make test
      - ./bin/my-context --version

  - name: macOS (ARM)
    os: macos-14  # M1/M2 runners
    tests:
      - make build
      - make test
      - ./bin/my-context --version

validations:
  - name: Path Normalization
    description: Verify paths work on all platforms
    test_script: |
      # Test Windows path handling
      ./bin/my-context start "Test Context"
      ./bin/my-context file "C:\\Users\\test\\file.txt"
      ./bin/my-context show --json | jq -e '.files[]'

  - name: Binary Size
    max_size: 10MB
    check: ls -lh bin/my-context* | awk '{print $5}'

  - name: Static Linking
    description: Verify no dynamic dependencies
    check: ldd bin/my-context || otool -L bin/my-context

notifications:
  on_success: "âœ… Cross-platform validation passed"
  on_failure: "âŒ Platform compatibility issues detected"
  report_to: slack  # Optional: Slack webhook
```

**Manual Test Checklist:**
Create `scripts/manual-test-checklist.md`:
```markdown
# Cross-Platform Manual Test Checklist

## Windows (Git Bash)
- [ ] Build succeeds
- [ ] All commands work
- [ ] Paths with backslashes work
- [ ] Paths with spaces work
- [ ] JSON output valid

## Windows (CMD)
- [ ] Binary runs
- [ ] Commands work
- [ ] Paths normalized correctly

## macOS (Intel)
- [ ] Build succeeds
- [ ] All tests pass
- [ ] Installation script works

## macOS (ARM/M1/M2)
- [ ] Build succeeds
- [ ] All tests pass
- [ ] Rosetta not required

## Linux (Ubuntu)
- [ ] Build succeeds
- [ ] All tests pass
- [ ] Installation to ~/.local/bin works

## WSL (Ubuntu)
- [ ] Build succeeds
- [ ] Windows path interop works
- [ ] Tests pass
```

---

### 2.4 Release Automation Agent

**Purpose:** Streamline release process

**Configuration:**
```yaml
# .claude/agents/release-automation.yml
name: Release Automation
trigger: manual
enabled: true

pre_release_checks:
  - name: Version Bump
    description: Ensure version number updated
    check: git diff HEAD~1 -- VERSION

  - name: Changelog
    description: Verify CHANGELOG.md updated
    check: git diff HEAD~1 -- CHANGELOG.md

  - name: All Tests Pass
    command: make check
    blocking: true

  - name: Cross-Platform Builds
    command: make build-all
    blocking: true

  - name: Manual Tests Complete
    checklist: scripts/manual-test-checklist.md
    require_confirmation: true

release_steps:
  - name: Create Git Tag
    command: |
      VERSION=$(cat VERSION)
      git tag -a "v${VERSION}" -m "Release v${VERSION}"

  - name: Push Tag
    command: git push origin --tags

  - name: Trigger GitHub Release
    description: GitHub Actions will build and release
    wait_for: github_actions

  - name: Verify Release
    check: gh release view "v${VERSION}"

post_release:
  - name: Update Documentation
    update:
      - README.md (installation section)
      - CLAUDE.md (version number)

  - name: Announce Release
    notify:
      - slack: "#releases"
      - discord: "#announcements"
    template: |
      ðŸŽ‰ My-Context v${VERSION} Released!

      Download: https://github.com/jcaldwell1066/my-context/releases/v${VERSION}

      Changes: See CHANGELOG.md

notifications:
  on_success: "ðŸš€ Release v${VERSION} published successfully"
  on_failure: "âŒ Release failed - check logs"
```

---

## 3. GitHub Actions Enhancements

### 3.1 Recommended CI Workflow

Create `.github/workflows/ci.yml`:
```yaml
name: CI

on:
  push:
    branches: [ main, dev, claude/* ]
  pull_request:
    branches: [ main, dev ]

jobs:
  test:
    name: Test on ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
        go: ['1.23', '1.24', '1.25']
    runs-on: ${{ matrix.os }}

    steps:
      - uses: actions/checkout@v4

      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: ${{ matrix.go }}

      - name: Download dependencies
        run: go mod download

      - name: Run make ci
        run: make ci

      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage.out
          flags: ${{ matrix.os }}

  lint:
    name: Lint
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-go@v5
        with:
          go-version: '1.25'

      - name: golangci-lint
        uses: golangci/golangci-lint-action@v4
        with:
          version: latest
          args: --timeout=5m

  security:
    name: Security Scan
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-go@v5

      - name: Run Gosec
        uses: securego/gosec@master
        with:
          args: ./...
```

---

## 4. Development Workflow Integration

### 4.1 Pre-Commit Workflow

```
Developer makes changes
       â†“
git commit
       â†“
Quality Guardian Agent triggers
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. make fmt             â”‚
â”‚ 2. make lint            â”‚
â”‚ 3. make test-short      â”‚
â”‚ 4. make build           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
  All pass? â”€â”€â”€Noâ”€â”€â†’ Commit blocked, show errors
       â†“
      Yes
       â†“
  Commit succeeds
```

### 4.2 Pre-Push Workflow

```
Developer ready to push
       â†“
git push
       â†“
Pre-Push Hook triggers
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. make check           â”‚ (Full test suite)
â”‚ 2. Verify branch name   â”‚ (claude/* format)
â”‚ 3. Check commit msgs    â”‚ (Conventional format)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
  All pass? â”€â”€â”€Noâ”€â”€â†’ Push blocked
       â†“
      Yes
       â†“
  Push succeeds â†’ GitHub Actions CI
```

### 4.3 Release Workflow

```
Developer ready to release
       â†“
/agent release-automation
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pre-Release Checks              â”‚
â”‚ 1. Version bumped?              â”‚
â”‚ 2. Changelog updated?           â”‚
â”‚ 3. All tests pass?              â”‚
â”‚ 4. Cross-platform builds OK?    â”‚
â”‚ 5. Manual tests confirmed?      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
  All pass? â”€â”€â”€Noâ”€â”€â†’ Release blocked
       â†“
      Yes
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Release Steps                   â”‚
â”‚ 1. Create git tag               â”‚
â”‚ 2. Push tag                     â”‚
â”‚ 3. Trigger GitHub Actions       â”‚
â”‚ 4. Wait for build completion    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Post-Release                    â”‚
â”‚ 1. Update docs                  â”‚
â”‚ 2. Announce release             â”‚
â”‚ 3. Archive release branch       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Monitoring & Observability

### 5.1 Code Quality Dashboard

**Recommended Tools:**
- **Codecov** - Test coverage tracking
- **Sonarcloud** - Code quality metrics
- **Dependabot** - Dependency updates
- **CodeClimate** - Maintainability scores

**Integration:**
```yaml
# .github/dependabot.yml
version: 2
updates:
  - package-ecosystem: "gomod"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
```

### 5.2 Performance Monitoring

**Agent Configuration:**
```yaml
# .claude/agents/performance-monitor.yml
name: Performance Monitor
trigger: on_pr
enabled: true

benchmarks:
  - name: Context Operations
    command: make benchmark
    baseline: benchmarks/baseline.txt
    threshold: 10%  # Alert if >10% slower

  - name: File I/O
    command: go test -bench=BenchmarkFile ./tests/benchmarks/

  - name: Large Datasets
    description: Test with 10K contexts
    setup: |
      ./scripts/generate-test-contexts.sh 10000
    command: |
      time ./bin/my-context list > /dev/null

notifications:
  on_regression: "âš ï¸  Performance regression detected"
  on_improvement: "ðŸš€ Performance improved!"
```

---

## 6. Quick Start Guide

### Step 1: Setup Basic Tooling

```bash
# Install golangci-lint
make dev-setup

# Verify installation
make lint
```

### Step 2: Setup Pre-Commit Hook

```bash
# Copy pre-commit hook
cat > .git/hooks/pre-commit << 'EOF'
#!/bin/bash
make fmt
make lint
make test-short || {
  echo "âŒ Tests failed - commit blocked"
  exit 1
}
EOF

chmod +x .git/hooks/pre-commit
```

### Step 3: Enable Session Start Hook (Optional)

```bash
# In Claude Code
# Type: /skill session-start-hook
# Follow prompts to configure
```

### Step 4: Add GitHub Actions

```bash
# Copy CI workflow
cp .github/workflows/release.yml .github/workflows/ci.yml
# Edit ci.yml to run on all branches
```

---

## 7. Advanced Configurations

### 7.1 Claude Code Integration

**Recommended Settings:**
```json
// .claude/config.json
{
  "skills": {
    "session-start-hook": {
      "enabled": true,
      "script": ".claude/hooks/session-start.sh"
    }
  },
  "agents": {
    "quality-guardian": {
      "enabled": true,
      "triggers": ["before_commit"]
    },
    "docs-sync": {
      "enabled": true,
      "triggers": ["on_file_change"]
    }
  },
  "notifications": {
    "slack_webhook": "${SLACK_WEBHOOK_URL}",
    "discord_webhook": "${DISCORD_WEBHOOK_URL}"
  }
}
```

### 7.2 Editor Integration

**VS Code Settings:**
```json
// .vscode/settings.json
{
  "go.lintTool": "golangci-lint",
  "go.lintOnSave": "package",
  "go.formatTool": "goimports",
  "editor.formatOnSave": true,
  "go.testOnSave": true,
  "go.coverOnSave": true,
  "files.exclude": {
    "**/.git": true,
    "**/bin": true,
    "**/*.exe": true
  }
}
```

**VS Code Tasks:**
```json
// .vscode/tasks.json
{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "make build",
      "type": "shell",
      "command": "make build",
      "group": "build"
    },
    {
      "label": "make test",
      "type": "shell",
      "command": "make test",
      "group": "test"
    },
    {
      "label": "make lint",
      "type": "shell",
      "command": "make lint"
    }
  ]
}
```

---

## 8. Metrics & Success Tracking

### 8.1 Key Performance Indicators (KPIs)

| Metric | Target | Measurement |
|--------|--------|-------------|
| Test Coverage | >80% | `make coverage` |
| Lint Score | 0 errors | `make lint` |
| Build Time | <2 min | CI duration |
| Test Suite Time | <30 sec | `make test-short` |
| Pre-commit Time | <10 sec | Local hook |
| Cross-platform Pass | 100% | Manual checklist |

### 8.2 Automation Success Metrics

| Metric | Current | With Agents | Improvement |
|--------|---------|-------------|-------------|
| Manual test time | 30 min | 5 min | 83% reduction |
| Release time | 2 hours | 30 min | 75% reduction |
| Bugs caught pre-commit | ~50% | ~90% | 80% improvement |
| Documentation drift | High | Low | Automated sync |

---

## 9. Troubleshooting

### Common Issues

**Issue 1: golangci-lint not found**
```bash
# Solution
make dev-setup
# Or manually:
go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
```

**Issue 2: Pre-commit hook not running**
```bash
# Solution
chmod +x .git/hooks/pre-commit
# Verify
ls -l .git/hooks/pre-commit
```

**Issue 3: Tests fail on CI but pass locally**
```bash
# Common causes:
# 1. Timezone differences
# 2. File path differences (Windows vs Unix)
# 3. Cached test results

# Solutions:
go clean -testcache
make test
```

---

## 10. Next Steps

### Immediate (This Week)
- [ ] Run `make lint` and fix critical issues
- [ ] Setup pre-commit hook
- [ ] Test session-start-hook skill

### Short-term (Next 2 Weeks)
- [ ] Add CI workflow for multi-OS testing
- [ ] Setup Codecov for coverage tracking
- [ ] Create release automation script

### Long-term (Next Month)
- [ ] Implement Documentation Sync Agent
- [ ] Add performance monitoring
- [ ] Setup Dependabot

---

## Resources

- **golangci-lint:** https://golangci-lint.run/
- **GitHub Actions:** https://docs.github.com/actions
- **Codecov:** https://codecov.io/
- **Dependabot:** https://docs.github.com/code-security/dependabot
- **Makefile Tutorial:** https://makefiletutorial.com/

---

**Document Version:** 1.0
**Last Updated:** 2025-11-16
**Maintained by:** Development Team
